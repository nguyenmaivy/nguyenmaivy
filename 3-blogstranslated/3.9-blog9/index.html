<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.134.3"><meta name=description content><meta name=author content="vynguyen08257@gmail.com"><link rel=icon href=../../images/favicon.png type=image/png><title>Blog 9 :: Internship Report</title>
<link href=../../css/nucleus.css?1765465501 rel=stylesheet><link href=../../css/fontawesome-all.min.css?1765465501 rel=stylesheet><link href=../../css/hybrid.css?1765465501 rel=stylesheet><link href=../../css/featherlight.min.css?1765465501 rel=stylesheet><link href=../../css/perfect-scrollbar.min.css?1765465501 rel=stylesheet><link href=../../css/auto-complete.css?1765465501 rel=stylesheet><link href=../../css/atom-one-dark-reasonable.css?1765465501 rel=stylesheet><link href=../../css/theme.css?1765465501 rel=stylesheet><link href=../../css/hugo-theme.css?1765465501 rel=stylesheet><link href=../../css/theme-workshop.css?1765465501 rel=stylesheet><script src=../../js/jquery-3.3.1.min.js?1765465501></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=../../3-blogstranslated/3.9-blog9/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a id=logo href=../../><svg id="Layer_1" data-name="Layer 1" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff}.cls-2{fill:#f90;fill-rule:evenodd}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09 10.85a4.7 4.7.0 00.19 1.48 7.73 7.73.0 00.54 1.19.77.77.0 01.12.38.64.64.0 01-.32.49l-1 .7a.83.83.0 01-.44.15.69.69.0 01-.49-.23 3.8 3.8.0 01-.6-.77q-.25-.42-.51-1a6.14 6.14.0 01-4.89 2.3 4.54 4.54.0 01-3.32-1.19 4.27 4.27.0 01-1.22-3.2 4.28 4.28.0 011.46-3.4A6.06 6.06.0 017.69 6.46a12.47 12.47.0 011.76.13q.92.13 1.91.36V5.73a3.65 3.65.0 00-.79-2.66A3.81 3.81.0 007.86 2.3a7.71 7.71.0 00-1.79.22 12.78 12.78.0 00-1.79.57 4.55 4.55.0 01-.58.22h-.26q-.35.0-.35-.52V2a1.09 1.09.0 01.12-.58 1.2 1.2.0 01.47-.35A10.88 10.88.0 015.77.32 10.19 10.19.0 018.36.0a6 6 0 014.35 1.35 5.49 5.49.0 011.38 4.09zM7.34 13.38a5.36 5.36.0 001.72-.31A3.63 3.63.0 0010.63 12 2.62 2.62.0 0011.19 11a5.63 5.63.0 00.16-1.44v-.7a14.35 14.35.0 00-1.53-.28 12.37 12.37.0 00-1.56-.1 3.84 3.84.0 00-2.47.67A2.34 2.34.0 005 11a2.35 2.35.0 00.61 1.76A2.4 2.4.0 007.34 13.38zm13.35 1.8a1 1 0 01-.64-.16 1.3 1.3.0 01-.35-.65L15.81 1.51a3 3 0 01-.15-.67.36.36.0 01.41-.41H17.7a1 1 0 01.65.16 1.4 1.4.0 01.33.65l2.79 11 2.59-11A1.17 1.17.0 0124.39.6a1.1 1.1.0 01.67-.16H26.4a1.1 1.1.0 01.67.16 1.17 1.17.0 01.32.65L30 12.39 32.88 1.25A1.39 1.39.0 0133.22.6a1 1 0 01.65-.16h1.54a.36.36.0 01.41.41 1.36 1.36.0 010 .26 3.64 3.64.0 01-.12.41l-4 12.86a1.3 1.3.0 01-.35.65 1 1 0 01-.64.16H29.25a1 1 0 01-.67-.17 1.26 1.26.0 01-.32-.67L25.67 3.64l-2.56 10.7a1.26 1.26.0 01-.32.67 1 1 0 01-.67.17zm21.36.44a11.28 11.28.0 01-2.56-.29 7.44 7.44.0 01-1.92-.67 1 1 0 01-.61-.93v-.84q0-.52.38-.52a.9.9.0 01.31.06l.42.17a8.77 8.77.0 001.83.58 9.78 9.78.0 002 .2 4.48 4.48.0 002.43-.55 1.76 1.76.0 00.86-1.57 1.61 1.61.0 00-.45-1.16A4.29 4.29.0 0043 9.22l-2.41-.76A5.15 5.15.0 0138 6.78a3.94 3.94.0 01-.83-2.41 3.7 3.7.0 01.45-1.85 4.47 4.47.0 011.19-1.37 5.27 5.27.0 011.7-.86A7.4 7.4.0 0142.6.0a8.87 8.87.0 011.12.07q.57.07 1.08.19t.95.26a4.27 4.27.0 01.7.29 1.59 1.59.0 01.49.41.94.94.0 01.15.55v.79q0 .52-.38.52a1.76 1.76.0 01-.64-.2 7.74 7.74.0 00-3.2-.64 4.37 4.37.0 00-2.21.47 1.6 1.6.0 00-.79 1.48 1.58 1.58.0 00.49 1.18 4.94 4.94.0 001.83.92L44.55 7a5.08 5.08.0 012.57 1.6A3.76 3.76.0 0147.9 11a4.21 4.21.0 01-.44 1.93 4.4 4.4.0 01-1.21 1.47 5.43 5.43.0 01-1.85.93A8.25 8.25.0 0142.05 15.62z"/><path class="cls-2" d="M45.19 23.81C39.72 27.85 31.78 30 25 30A36.64 36.64.0 01.22 20.57c-.51-.46-.06-1.09.56-.74A49.78 49.78.0 0025.53 26.4 49.23 49.23.0 0044.4 22.53C45.32 22.14 46.1 23.14 45.19 23.81z"/><path class="cls-2" d="M47.47 21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74 3.13-2.2 8.27-1.57 8.86-.83s-.16 5.89-3.09 8.35c-.45.38-.88.18-.68-.32C46.69 25.8 48.17 22.11 47.47 21.21z"/></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=../../js/lunr.min.js?1765465501></script><script type=text/javascript src=../../js/auto-complete.js?1765465501></script><script type=text/javascript>var baseurl="https://nguyenmaivy.github.io/nguyenmaivy/"</script><script type=text/javascript src=../../js/search.js?1765465501></script></div><div class=highlightable><ul class=topics><li data-nav-id=/1-worklog/ title=Worklog class=dd-item><a href=../../1-worklog/><b>1. </b>Worklog
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/1-worklog/1.1-week1/ title="Week 1 Worklog" class=dd-item><a href=../../1-worklog/1.1-week1/><b>1.1. </b>Week 1 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.2-week2/ title="Week 2 Worklog" class=dd-item><a href=../../1-worklog/1.2-week2/><b>1.2. </b>Week 2 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.3-week3/ title="Week 3 Worklog" class=dd-item><a href=../../1-worklog/1.3-week3/><b>1.3. </b>Week 3 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.4-week4/ title="Week 4 Worklog" class=dd-item><a href=../../1-worklog/1.4-week4/><b>1.4. </b>Week 4 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.5-week5/ title="Week 5 Worklog" class=dd-item><a href=../../1-worklog/1.5-week5/><b>1.5. </b>Week 5 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.6-week6/ title="Week 6 Worklog" class=dd-item><a href=../../1-worklog/1.6-week6/><b>1.6. </b>Week 6 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.7-week7/ title="Week 7 Worklog" class=dd-item><a href=../../1-worklog/1.7-week7/><b>1.7. </b>Week 7 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.8-week8/ title="Week 8 Worklog" class=dd-item><a href=../../1-worklog/1.8-week8/><b>1.8. </b>Week 8 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.10-week10/ title="Worklog Week 10" class=dd-item><a href=../../1-worklog/1.10-week10/><b>1.10. </b>Worklog Week 10
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.9-week9/ title="Worklog Week 9" class=dd-item><a href=../../1-worklog/1.9-week9/><b>1.9. </b>Worklog Week 9
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.11-week11/ title="Worklog Week 11" class=dd-item><a href=../../1-worklog/1.11-week11/><b>1.11. </b>Worklog Week 11
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/2-proposal/ title=Proposal class=dd-item><a href=../../2-proposal/><b>2.</b>Proposal
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/ title="Translated Blogs" class="dd-item
parent"><a href=../../3-blogstranslated/><b>3. </b>Translated Blogs
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/3-blogstranslated/3.1-blog1/ title="Blog 1" class=dd-item><a href=../../3-blogstranslated/3.1-blog1/><b>3.1. </b>Blog 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.2-blog2/ title="Blog 2" class=dd-item><a href=../../3-blogstranslated/3.2-blog2/><b>3.2. </b>Blog 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.3-blog3/ title="Blog 3" class=dd-item><a href=../../3-blogstranslated/3.3-blog3/><b>3.3. </b>Blog 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.4-blog4/ title="Blog 4" class=dd-item><a href=../../3-blogstranslated/3.4-blog4/><b>3.4. </b>Blog 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.5-blog5/ title="Blog 5" class=dd-item><a href=../../3-blogstranslated/3.5-blog5/><b>3.6. </b>Blog 5
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.6-blog6/ title="Blog 5" class=dd-item><a href=../../3-blogstranslated/3.6-blog6/><b>3.6. </b>Blog 5
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.7-blog7/ title="Blog 7" class=dd-item><a href=../../3-blogstranslated/3.7-blog7/><b>3.7. </b>Blog 7
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.8-blog8/ title="Blog 8" class=dd-item><a href=../../3-blogstranslated/3.8-blog8/><b>3.8. </b>Blog 8
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.9-blog9/ title="Blog 9" class="dd-item
active"><a href=../../3-blogstranslated/3.9-blog9/><b>3.9. </b>Blog 9
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/4-eventparticipated/ title="Events Participated" class=dd-item><a href=../../4-eventparticipated/><b>4. </b>Events Participated
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/ title=Workshop class=dd-item><a href=../../5-workshop/><b>5. </b>Workshop
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.1-workshop-overview/ title=Introduction class=dd-item><a href=../../5-workshop/5.1-workshop-overview/><b>5.1. </b>Introduction
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.2-prerequiste/ title=Prerequiste class=dd-item><a href=../../5-workshop/5.2-prerequiste/><b>5.2. </b>Prerequiste
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.3-s3-vpc/ title="Access S3 from VPC" class=dd-item><a href=../../5-workshop/5.3-s3-vpc/><b>5.3. </b>Access S3 from VPC
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.3-s3-vpc/5.3.1-create-gwe/ title="Create a gateway endpoint" class=dd-item><a href=../../5-workshop/5.3-s3-vpc/5.3.1-create-gwe/><b>5.3.1 </b>Create a gateway endpoint
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.3-s3-vpc/5.3.2-test-gwe/ title="Test the Gateway Endpoint" class=dd-item><a href=../../5-workshop/5.3-s3-vpc/5.3.2-test-gwe/><b>5.3.2 </b>Test the Gateway Endpoint
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/5-workshop/5.4-s3-onprem/ title="Access S3 from on-premises" class=dd-item><a href=../../5-workshop/5.4-s3-onprem/><b>5.4. </b>Access S3 from on-premises
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.4-s3-onprem/5.4.1-prepare/ title="Prepare the environment" class=dd-item><a href=../../5-workshop/5.4-s3-onprem/5.4.1-prepare/><b>5.4.1 </b>Prepare the environment
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.4-s3-onprem/5.4.2-create-interface-enpoint/ title="Create an S3 Interface endpoint" class=dd-item><a href=../../5-workshop/5.4-s3-onprem/5.4.2-create-interface-enpoint/><b>5.4.2 </b>Create an S3 Interface endpoint
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.4-s3-onprem/5.4.3-test-endpoint/ title="Test the Interface Endpoint" class=dd-item><a href=../../5-workshop/5.4-s3-onprem/5.4.3-test-endpoint/><b>5.4.3 </b>Test the Interface Endpoint
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.4-s3-onprem/5.4.4-dns-simulation/ title="On-premises DNS Simulation" class=dd-item><a href=../../5-workshop/5.4-s3-onprem/5.4.4-dns-simulation/><b>5.4.4 </b>On-premises DNS Simulation
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/5-workshop/5.5-policy/ title="VPC Endpoint Policies" class=dd-item><a href=../../5-workshop/5.5-policy/><b>5.5. </b>VPC Endpoint Policies
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.6-cleanup/ title="Clean up" class=dd-item><a href=../../5-workshop/5.6-cleanup/><b>5.6. </b>Clean up
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/6-self-evaluation/ title=Self-Assessment class=dd-item><a href=../../6-self-evaluation/><b>6. </b>Self-Assessment
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/7-feedback/ title="Sharing, Contributing Opinions" class=dd-item><a href=../../7-feedback/><b>7. </b>Sharing, Contributing Opinions
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://www.facebook.com/groups/awsstudygroupfcj/><i class='fab fa-facebook'></i> AWS Study Group</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding><i class="fas fa-language fa-fw"></i><div class=select-style><select id=select-language onchange="location=this.value"><option id=en value=https://nguyenmaivy.github.io/nguyenmaivy/3-blogstranslated/3.9-blog9/ selected>English</option><option id=vi value=https://nguyenmaivy.github.io/nguyenmaivy/vi/3-blogstranslated/3.9-blog9/>Tiếng Việt</option></select><svg id="Capa_1" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg></div></a></li><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></section><section id=footer><left><b>Workshop</b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title=Migrate alt="web counter" border=0></a><br><b><a href=https://cloudjourney.awsstudygroup.com/>Cloud Journey</a></b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" alt="web counter" border=0>
</left><left><br><br><b>Last Updated</b><br><i><span id=lastUpdated style=color:orange></span>
</i><script>const today=new Date,formattedDate=today.toLocaleDateString("en-GB");document.getElementById("lastUpdated").textContent=formattedDate</script></left><left><br><br><b>Team</b><br><i><a href=https://www.facebook.com/groups/660548818043427 style=color:orange>First Cloud Journey</a><br></i></left><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=../../>Internship Report</a> > <a href=../../3-blogstranslated/>Translated Blogs</a> > Blog 9</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#getting-started-using-powertools-for-aws-lambda-java-v2>Getting started using Powertools for AWS Lambda (Java) v2</a></li><li><a href=#logging>Logging</a></li><li><a href=#metrics>Metrics</a></li><li><a href=#tracing>Tracing</a></li><li><a href=#reducing-lambda-cold-start-duration>Reducing Lambda cold start duration</a></li><li><a href=#lambda-msk-event-source-mapping-integration>Lambda MSK Event Source Mapping Integration</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Blog 9</h1><h1 id=introducing-v2-of-powertools-for-aws-lambda-java>Introducing v2 of Powertools for AWS Lambda (Java)</h1><p>Modern applications increasingly rely on Serverless technologies such as Amazon Web Services (AWS) <a href=https://aws.amazon.com/lambda/>Lambda</a> to provide scalability, cost efficiency, and agility. <a href=https://docs.aws.amazon.com/wellarchitected/latest/serverless-applications-lens/>The Serverless Applications Lens for the AWS Well-Architected Framework</a> focuses on how to design, deploy, and architect your Serverless applications to overcome some of these challenges.</p><p><a href=https://github.com/aws-powertools>Powertools for AWS</a> Lambda is a developer toolkit that helps you implement Serverless best practices and directly translates AWS Well-Architected recommendations into actionable, developer friendly utilities. Following the community’s continued successful adoption of Powertools for AWS in Python, Java, TypeScript, and .NET, this post announces the general availability of Powertools for AWS Lambda (Java) v2 coming with major performance improvements, enhanced core utilities, and a brand-new Kafka utility.</p><p>Powertools for AWS (Java) v2 provides three updated core utilities:</p><ul><li><strong>Logging</strong>: A re-designed Java idiomatic logging module providing structured logging that streamlines log aggregation and analysis.</li><li><strong>Metrics</strong>: An improved metrics experience allowing custom metrics collection using <a href=https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch_Embedded_Metric_Format_Specification.html>CloudWatch Embedded Metric Format (EMF)</a>.</li><li><strong>Tracing</strong>: An annotation-based way to collect distributed tracing data with <a href=https://aws.amazon.com/xray/>AWS X-Ray</a> to visualize and analyze request flows.</li></ul><p>Along with the updated core utilities, v2 of the developer toolkit adds two brand new features:</p><ul><li><strong>GraalVM native image support</strong>: Native image support for GraalVM across all core utilities reducing Lambda cold start times up to 75.61% (p95).</li><li><strong>Kafka utility</strong>: This new utility integrates with <a href=https://aws.amazon.com/msk/>Amazon Managed Streaming for Apache Kafka (Amazon MSK)</a> and self-managed Kafka event sources on Lambda and allows developers to deserialize directly into Kafka native types such as ConsumerRecords.</li></ul><p>Learn more about how to migrate to v2 in our <a href=https://docs.powertools.aws.dev/lambda/java/latest/upgrade/>upgrade guide</a>.</p><hr><h2 id=getting-started-using-powertools-for-aws-lambda-java-v2>Getting started using Powertools for AWS Lambda (Java) v2</h2><p>Powertools for AWS Lambda (Java) v2 is readily accessible as a Java package on Maven Central and integrates with popular build tools such as Maven and Gradle. This post focuses on Maven-based implementation samples to help you get started quickly. Gradle examples are available for all utilities in the <a href=https://docs.powertools.aws.dev/lambda/java/>documentation</a> and the <a href=https://github.com/aws-powertools/powertools-lambda-java/tree/main/examples>examples repository</a>.</p><p>The toolkit is compatible with Java 11 and newer versions, making sure you can use modern Java features while building Serverless applications. Examples on how to install each utility are outlined in each section of the post and complete configuration examples are also available in the <a href=https://docs.powertools.aws.dev/lambda/java/>Powertools documentation</a>.</p><hr><h2 id=logging>Logging</h2><p>The Logging utility helps implement structured logging when running on Lambda while still using familiar Java logging libraries such as slf4j, log4j, and logback. v2 of Logging allows you to do the following:</p><ul><li>Output structured JSON logs enriched with Lambda context</li><li>Choose the logging backend of your choice among log4j2 and logback</li><li>Add structured arguments to logs that get serialized into arbitrarily nested JSON objects</li><li>Add global log keys using the slf4j default <a href=https://www.slf4j.org/apidocs/org/slf4j/MDC.html>Mapped Diagnostic Context (MDC)</a></li></ul><p>To add the logging utility to your project, include it as a dependency in your Java Maven project. The following example shows how to add the log4j2 logging backend to your application:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>&lt;!-- In the dependencies section --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;groupId&gt;software.amazon.lambda&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;artifactId&gt;powertools-logging-log4j&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;!-- Alternatively, if you wish to use the logback backend</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;artifactId&gt;powertools-logging-logback&lt;/artifactId&gt; </span>
</span></span><span style=display:flex><span>    --&gt;<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;version&gt;2.1.1&lt;/version&gt;</span>    
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;!-- In the build plugins section --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;plugin&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;groupId&gt;dev.aspectj&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>&lt;aspectLibraries&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#ae81ff>&lt;aspectLibrary&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>&lt;groupId&gt;software.amazon.lambda&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>&lt;artifactId&gt;powertools-logging&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>&lt;version&gt;2.1.1&lt;/version&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#ae81ff>&lt;/aspectLibrary&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>&lt;/aspectLibraries&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;/configuration&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;/plugin&gt;</span>
</span></span></code></pre></div><p>Create a custom JsonTemplateLayout appender in your log4j2.xml file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;Configuration&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>&lt;Appenders&gt;</span>
</span></span><span style=display:flex><span>       <span style=color:#ae81ff>&lt;Console name=&#34;JsonAppender&#34; target=&#34;SYSTEM_OUT&#34;&gt;</span>
</span></span><span style=display:flex><span>           <span style=color:#ae81ff>&lt;JsonTemplateLayout eventTemplateUri=&#34;classpath:LambdaJsonLayout.json&#34; /&gt;</span>
</span></span><span style=display:flex><span>       <span style=color:#ae81ff>&lt;/Console&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>&lt;/Appenders&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>&lt;Loggers&gt;</span>
</span></span><span style=display:flex><span>       <span style=color:#ae81ff>&lt;Logger name=&#34;JsonLogger&#34; level=&#34;INFO&#34; additivity=&#34;false&#34;&gt;</span>
</span></span><span style=display:flex><span>           <span style=color:#ae81ff>&lt;AppenderRef ref=&#34;JsonAppender&#34;/&gt;</span>
</span></span><span style=display:flex><span>       <span style=color:#ae81ff>&lt;/Logger&gt;</span>
</span></span><span style=display:flex><span>       <span style=color:#ae81ff>&lt;Root level=&#34;info&#34;&gt;</span>
</span></span><span style=display:flex><span>           <span style=color:#ae81ff>&lt;AppenderRef ref=&#34;JsonAppender&#34;/&gt;</span>
</span></span><span style=display:flex><span>       <span style=color:#ae81ff>&lt;/Root&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>&lt;/Loggers&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;/Configuration&gt;</span>
</span></span></code></pre></div><p>To add structured logging to your functions, apply the @Logging annotation to your Lambda handler and use the familiar <a href=https://www.slf4j.org/>slf4j Java API</a> when writing log statements. This allows you to adopt the logging utility without major code refactoring. Powertools handles routing to the correct logging backend for you. The following example shows how to add global log keys using MDC, and add a structured entry argument to your log message:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>public class App implements RequestHandler&lt;SQSEvent, String&gt; {</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>private static final Logger log = LoggerFactory.getLogger(App.class);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @<span style=color:#ae81ff>Logging</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>public String handleRequest(final SQSEvent input, final Context context) {</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// Add a global log key using Mapped Diagnostic Context MDC</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>MDC.put(&#34;myCustomKey&#34;, &#34;willBeLoggedForAllLogStatements&#34;);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// Log a message with a structured argument (any JSON serializable Object)</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>log.info(&#34;My message&#34;, entry(&#34;anotherCustomKey&#34;, Map.of(&#34;nested&#34;, &#34;object&#34;)));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// ... return response</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Lambda sends the following JSON-formatted output to <a href=https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html>Amazon CloudWatch Logs</a> (note how the Java Map gets auto-serialized into a JSON object):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;level&#34;: </span><span style=color:#e6db74>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;message&#34;: </span><span style=color:#e6db74>&#34;My message&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;cold_start&#34;: </span><span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;function_arn&#34;: </span><span style=color:#e6db74>&#34;arn:aws:lambda:us-east-1:012345678912:function:AppFunction&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;function_memory_size&#34;: </span><span style=color:#ae81ff>512</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;function_name&#34;: </span><span style=color:#e6db74>&#34;AppFunction&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;function_request_id&#34;: </span><span style=color:#e6db74>&#34;0150a2a4-c5aa-4277-9345-17bad039f6c0&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;function_version&#34;: </span><span style=color:#e6db74>&#34;$LATEST&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;sampling_rate&#34;: </span><span style=color:#ae81ff>0.1</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;service&#34;: </span><span style=color:#e6db74>&#34;powertools-java-sample&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;timestamp&#34;: </span><span style=color:#e6db74>&#34;2025-05-20T08:35:28.565Z&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;myCustomKey&#34;: </span><span style=color:#e6db74>&#34;willBeLoggedForAllLogStatements&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;anotherCustomKey&#34;: </span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;nested&#34;: </span><span style=color:#e6db74>&#34;object&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><h2 id=metrics>Metrics</h2><p>CloudWatch offers essential built-in service metrics for monitoring application throughput, error rates, and resource usage. Users also need to capture workload specific custom metrics relevant to their business use-case following AWS Well-Architected best-practices.</p><p>Powertools for AWS (Java) enables you to create custom metrics asynchronously by outputting metrics in CloudWatch EMF directly to standard output—an approach that needs no other configuration. The Lambda service sends the EMF formatted metrics to CloudWatch on your behalf.</p><p>The Metrics utility allows you to:</p><ul><li>Create custom metrics asynchronously using CloudWatch EMF</li><li>Reduce latency by avoiding synchronous metric publishing</li><li>Automatically track cold starts in a custom CloudWatch metric</li><li>Avoid manually validating your output against the EMF specification</li><li>Keep you code clean by avoiding manual flushing to standard output</li></ul><p>To add the Metrics utility to your project, add the following Maven dependency:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>&lt;!-- In the dependencies section --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;groupId&gt;software.amazon.lambda&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;artifactId&gt;powertools-metrics&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;version&gt;2.1.1&lt;/version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;!-- In the build plugins section --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;plugin&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;groupId&gt;dev.aspectj&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>&lt;aspectLibraries&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#ae81ff>&lt;aspectLibrary&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>&lt;groupId&gt;software.amazon.lambda&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>&lt;artifactId&gt;powertools-metrics&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>&lt;version&gt;2.1.1&lt;/version&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#ae81ff>&lt;/aspectLibrary&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>&lt;/aspectLibraries&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;/configuration&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;/plugin&gt;</span>
</span></span></code></pre></div><p>To add custom metrics to your Lambda function, place the @FlushMetrics annotation on your Lambda handler. The library takes care of validating and flushing your metrics to standard output before the Lambda function terminates. The following example shows how you can automatically capture a cold start metric and emit your own custom metrics:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>public class App implements RequestHandler&lt;SQSEvent, String&gt; {</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>private static final Logger log = LoggerFactory.getLogger(App.class);</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>private static final Metrics metrics = MetricsFactory.getMetricsInstance();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>// This configures a default namespace and service dimension for all metrics</span>
</span></span><span style=display:flex><span>    @<span style=color:#ae81ff>FlushMetrics(namespace = &#34;ServerlessAirline&#34;, service = &#34;payment&#34;, captureColdStart = true)</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>public String handleRequest(final SQSEvent input, final Context context) {</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// The Metrics instance is a singleton</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>metrics.addMetric(&#34;CustomMetric1&#34;, 1, MetricUnit.COUNT);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// Publish metrics with non-default configuration options</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>DimensionSet dimensionSet = new DimensionSet();</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>dimensionSet.addDimension(&#34;Service&#34;, &#34;AnotherService&#34;);</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>metrics.flushSingleMetric(&#34;CustomMetric2&#34;, 1, MetricUnit.COUNT, &#34;AnotherNamespace&#34;, dimensionSet);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// ... return response</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><img src=../../images/3-Blogstranslated/Blog9/cloudwatch-graph-view.png></p><blockquote><p><em>Figure 1. AWS CloudWatch Metrics Graph View.</em></p></blockquote><hr><h2 id=tracing>Tracing</h2><p>The Tracing utility provides an annotation-based integration with X-Ray for distributed tracing with minimal configuration. Tracing allows you to:</p><ul><li>Gain visibility into your own methods calls and AWS service interactions visualized in the X-Ray console</li><li>Automatically capture method responses and errors</li><li>Automatically capture Lambda cold start information as part of your traces</li><li>Add custom metadata to traces for more context and debugging information</li><li>Enable or disable tracing features through environment variables without code changes</li></ul><p>To add the Tracing utility to your project, add the following Maven dependency:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>&lt;!-- In the dependencies section --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;groupId&gt;software.amazon.lambda&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;artifactId&gt;powertools-tracing&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;version&gt;2.1.1&lt;/version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;!-- In the build plugins section --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;plugin&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;groupId&gt;dev.aspectj&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>&lt;aspectLibraries&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#ae81ff>&lt;aspectLibrary&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>&lt;groupId&gt;software.amazon.lambda&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>&lt;artifactId&gt;powertools-tracing&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>&lt;version&gt;2.1.1&lt;/version&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#ae81ff>&lt;/aspectLibrary&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>&lt;/aspectLibraries&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;/configuration&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;/plugin&gt;</span>
</span></span></code></pre></div><p>To enable tracing in your Lambda function, annotate your Lambda handler and your custom methods that you want to trace with the @Tracing annotation. Each annotation maps to a sub-segment of your main Lambda handler in X-Ray and becomes visible in the console.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>public class App implements RequestHandler&lt;APIGatewayProxyRequestEvent, APIGatewayProxyResponseEvent&gt; {</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>private static final Logger log = LoggerFactory.getLogger(App.class);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @<span style=color:#ae81ff>Tracing</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>public APIGatewayProxyResponseEvent handleRequest(final APIGatewayProxyRequestEvent input, final Context context) {</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// ... business logic</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// Get calling IP with tracing</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>String location = getCallingIp(&#34;https://checkip.amazonaws.com&#34;);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// ... return response</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @<span style=color:#ae81ff>Tracing(segmentName = &#34;Location service&#34;)</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>private String getCallingIp(String address) {</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// Implementation to get IP address</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>log.info(&#34;Retrieving caller IP address&#34;);</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// Add custom metadata to current sub-segment</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>URL url = new URL(address);</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>putMetadata(&#34;getCallingIp&#34;, address);</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// ...</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>return &#34;127.0.0.1&#34;;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The X-Ray console displays a generated service map when traffic begins flowing through your application. Applying the Tracing annotation to your Lambda function handler method or any other methods in the execution chain provides you with comprehensive visibility into the traffic patterns throughout your application. The following figure shows how the custom metadata added in the example is associated with the custom sub-segment.</p><p><img src=../../images/3-Blogstranslated/Blog9/xray-trace-waterfall.jpeg></p><blockquote><p><em>Figure 2. AWS X-Ray waterfall trace view</em></p></blockquote><hr><h2 id=reducing-lambda-cold-start-duration>Reducing Lambda cold start duration</h2><p>A key feature in Powertools for AWS Lambda (Java) v2 is <a href=https://www.graalvm.org/>GraalVM</a> native image support for all core utilities. Compiling your Lambda functions to native executables allows you to significantly reduce cold start times and memory usage. Using Powertools v2 with GraalVM allows you to reduce cold starts up to <strong>75.61% (p95)</strong> compared to using the managed Java runtime. The following benchmark compares the cold start times of an application using all core utilities (logging, metrics, tracing) on the managed java21 runtime as compared to the Lambda provided.al2023 runtime running a GraalVM compiled native image (go to the supported <a href=https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html>Lambda runtimes</a>):</p><table><thead><tr><th style=text-align:left>Environment</th><th style=text-align:left>p95 (ms)</th><th style=text-align:left>Min (ms)</th><th style=text-align:left>Avg (ms)</th><th style=text-align:left>Max (ms)</th><th style=text-align:left>Max Memory (MB)</th><th style=text-align:left>N</th></tr></thead><tbody><tr><td style=text-align:left>Powertools for AWS (Java) v2: JVM</td><td style=text-align:left>1682.92</td><td style=text-align:left>1224.55</td><td style=text-align:left>1224.55</td><td style=text-align:left>2229.81</td><td style=text-align:left>205.04</td><td style=text-align:left>234</td></tr><tr><td style=text-align:left>Powertools for AWS (Java) v2: GraalVM</td><td style=text-align:left>542.86</td><td style=text-align:left>404.92</td><td style=text-align:left>504.77</td><td style=text-align:left>752.85</td><td style=text-align:left>93.46</td><td style=text-align:left>369</td></tr></tbody></table><p>This improvement is particularly valuable for latency-sensitive applications and functions that scale frequently. Check out a <a href=https://github.com/aws-powertools/powertools-lambda-java/tree/main/examples/powertools-examples-core-utilities/sam-graalvm>full working example on GitHub</a>.</p><hr><h2 id=lambda-msk-event-source-mapping-integration>Lambda MSK Event Source Mapping Integration</h2><p>The new Kafka utility introduced with Powertools for AWS Lambda (Java) v2 streamlines working with <a href=https://docs.aws.amazon.com/lambda/latest/dg/with-msk.html>the Lambda MSK Event Source Mapping (ESM)</a> and self-managed Kafka event sources. It provides a familiar experience for developers working with Apache Kafka by allowing direct conversion from Lambda events to Kafka’s native types. The key features include:</p><ul><li>Direct deserialization into Kafka ConsumerRecords&lt;K, V> objects while using the Lambda-native RequestHandler interface</li><li>Support for deserializing JSON, <a href=https://avro.apache.org/>Avro</a>, and <a href=https://protobuf.dev/>Protobuf</a> encoded records for key and value fields with and without usage of a Schema Registry when producing the messages</li></ul><p>To add the Kafka utility to your project, include the powertools-kafka library as a Maven dependency in your pom.xml:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>&lt;!-- In the dependencies section --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;groupId&gt;software.amazon.lambda&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;artifactId&gt;powertools-kafka&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;version&gt;2.1.1&lt;/version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;!-- Kafka clients dependency - compatibility works for &gt;= 3.0.0 --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;version&gt;4.0.0&lt;/version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;/dependency&gt;</span>
</span></span></code></pre></div><p>Use the @Deserialization annotation on your Lambda handler to deserialize messages as native Kafka ConsumerRecords. Make sure to specify the deserializer type. The following example shows how to deserialize Avro encoded record values with String keys. As in a regular Lambda handler, declare the input type to your function in the RequestHandler generic parameters and the utility discovers the deserialization types automatically. The AvroProduct class in the following example is an auto-generated Java class using the Java org.apache.avro.avro library.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>public class App implements RequestHandler&lt;ConsumerRecords&lt;String, AvroProduct&gt;, Void&gt; {</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>private static final Logger log = LoggerFactory.getLogger(App.class);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @<span style=color:#ae81ff>Deserialization(type = DeserializationType.KAFKA_AVRO)</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>public Void handleRequest(ConsumerRecords&lt;String, AvroProduct&gt; consumerRecords, Context context) {</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>log.info(&#34;Deserialized {} records.&#34;, consumerRecords.records().size()); </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// ... Business logic </span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>return null;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><h2 id=conclusion>Conclusion</h2><p>Powertools for AWS Lambda (Java) v2 represents the next evolution in the toolkit for building robust, observable, and high-performing Serverless applications. Throughout this post, we’ve explored the enhanced core observability utilities with their new features, the performance gains through GraalVM native image support, and the new Kafka utility that supports using familiar Kafka patterns when working on Lambda.</p><p>Powertools also offers more utilities to handle common Serverless design patterns. Each utility is designed with the same principles of clarity and minimal overhead.To learn more:</p><ol><li>Visit the <a href=https://docs.powertools.aws.dev/lambda/java/>documentation</a> for detailed guides and examples</li><li>Try the <a href=https://github.com/aws-powertools/powertools-lambda-java/tree/main/examples>sample applications</a></li><li>Join the <a href=https://github.com/aws-powertools/powertools-lambda-java>community</a> on GitHub to share your experience and get help</li></ol><p>Your next Serverless application awaits with Powertools for AWS Lambda (Java) v2. We would love to hear your feedback!</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=../../3-blogstranslated/3.8-blog8/ title="Blog 8"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=../../4-eventparticipated/ title="Events Participated" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=../../js/clipboard.min.js?1765465501></script><script src=../../js/perfect-scrollbar.min.js?1765465501></script><script src=../../js/perfect-scrollbar.jquery.min.js?1765465501></script><script src=../../js/jquery.sticky.js?1765465501></script><script src=../../js/featherlight.min.js?1765465501></script><script src=../../js/highlight.pack.js?1765465501></script><script>hljs.initHighlightingOnLoad()</script><script src=../../js/modernizr.custom-3.6.0.js?1765465501></script><script src=../../js/learn.js?1765465501></script><script src=../../js/hugo-learn.js?1765465501></script><link href=../../mermaid/mermaid.css?1765465501 rel=stylesheet><script src=../../mermaid/mermaid.js?1765465501></script><script>mermaid.initialize({startOnLoad:!0})</script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,(e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date),(i=t.createElement(n),a=t.getElementsByTagName(n)[0]),i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-158079754-2","auto"),ga("send","pageview")</script></body></html>