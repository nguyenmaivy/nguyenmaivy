<!doctype html><html lang=vi class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.134.3"><meta name=description content><meta name=author content="vynguyen08257@gmail.com"><link rel=icon href=../../../images/favicon.png type=image/png><title>Blog 9 :: Báo cáo thực tập</title>
<link href=../../../css/nucleus.css?1765465502 rel=stylesheet><link href=../../../css/fontawesome-all.min.css?1765465502 rel=stylesheet><link href=../../../css/hybrid.css?1765465502 rel=stylesheet><link href=../../../css/featherlight.min.css?1765465502 rel=stylesheet><link href=../../../css/perfect-scrollbar.min.css?1765465502 rel=stylesheet><link href=../../../css/auto-complete.css?1765465502 rel=stylesheet><link href=../../../css/atom-one-dark-reasonable.css?1765465502 rel=stylesheet><link href=../../../css/theme.css?1765465502 rel=stylesheet><link href=../../../css/hugo-theme.css?1765465502 rel=stylesheet><link href=../../../css/theme-workshop.css?1765465502 rel=stylesheet><script src=../../../js/jquery-3.3.1.min.js?1765465502></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=../../../vi/3-blogstranslated/3.9-blog9/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a id=logo href=../../../><svg id="Layer_1" data-name="Layer 1" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff}.cls-2{fill:#f90;fill-rule:evenodd}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09 10.85a4.7 4.7.0 00.19 1.48 7.73 7.73.0 00.54 1.19.77.77.0 01.12.38.64.64.0 01-.32.49l-1 .7a.83.83.0 01-.44.15.69.69.0 01-.49-.23 3.8 3.8.0 01-.6-.77q-.25-.42-.51-1a6.14 6.14.0 01-4.89 2.3 4.54 4.54.0 01-3.32-1.19 4.27 4.27.0 01-1.22-3.2 4.28 4.28.0 011.46-3.4A6.06 6.06.0 017.69 6.46a12.47 12.47.0 011.76.13q.92.13 1.91.36V5.73a3.65 3.65.0 00-.79-2.66A3.81 3.81.0 007.86 2.3a7.71 7.71.0 00-1.79.22 12.78 12.78.0 00-1.79.57 4.55 4.55.0 01-.58.22h-.26q-.35.0-.35-.52V2a1.09 1.09.0 01.12-.58 1.2 1.2.0 01.47-.35A10.88 10.88.0 015.77.32 10.19 10.19.0 018.36.0a6 6 0 014.35 1.35 5.49 5.49.0 011.38 4.09zM7.34 13.38a5.36 5.36.0 001.72-.31A3.63 3.63.0 0010.63 12 2.62 2.62.0 0011.19 11a5.63 5.63.0 00.16-1.44v-.7a14.35 14.35.0 00-1.53-.28 12.37 12.37.0 00-1.56-.1 3.84 3.84.0 00-2.47.67A2.34 2.34.0 005 11a2.35 2.35.0 00.61 1.76A2.4 2.4.0 007.34 13.38zm13.35 1.8a1 1 0 01-.64-.16 1.3 1.3.0 01-.35-.65L15.81 1.51a3 3 0 01-.15-.67.36.36.0 01.41-.41H17.7a1 1 0 01.65.16 1.4 1.4.0 01.33.65l2.79 11 2.59-11A1.17 1.17.0 0124.39.6a1.1 1.1.0 01.67-.16H26.4a1.1 1.1.0 01.67.16 1.17 1.17.0 01.32.65L30 12.39 32.88 1.25A1.39 1.39.0 0133.22.6a1 1 0 01.65-.16h1.54a.36.36.0 01.41.41 1.36 1.36.0 010 .26 3.64 3.64.0 01-.12.41l-4 12.86a1.3 1.3.0 01-.35.65 1 1 0 01-.64.16H29.25a1 1 0 01-.67-.17 1.26 1.26.0 01-.32-.67L25.67 3.64l-2.56 10.7a1.26 1.26.0 01-.32.67 1 1 0 01-.67.17zm21.36.44a11.28 11.28.0 01-2.56-.29 7.44 7.44.0 01-1.92-.67 1 1 0 01-.61-.93v-.84q0-.52.38-.52a.9.9.0 01.31.06l.42.17a8.77 8.77.0 001.83.58 9.78 9.78.0 002 .2 4.48 4.48.0 002.43-.55 1.76 1.76.0 00.86-1.57 1.61 1.61.0 00-.45-1.16A4.29 4.29.0 0043 9.22l-2.41-.76A5.15 5.15.0 0138 6.78a3.94 3.94.0 01-.83-2.41 3.7 3.7.0 01.45-1.85 4.47 4.47.0 011.19-1.37 5.27 5.27.0 011.7-.86A7.4 7.4.0 0142.6.0a8.87 8.87.0 011.12.07q.57.07 1.08.19t.95.26a4.27 4.27.0 01.7.29 1.59 1.59.0 01.49.41.94.94.0 01.15.55v.79q0 .52-.38.52a1.76 1.76.0 01-.64-.2 7.74 7.74.0 00-3.2-.64 4.37 4.37.0 00-2.21.47 1.6 1.6.0 00-.79 1.48 1.58 1.58.0 00.49 1.18 4.94 4.94.0 001.83.92L44.55 7a5.08 5.08.0 012.57 1.6A3.76 3.76.0 0147.9 11a4.21 4.21.0 01-.44 1.93 4.4 4.4.0 01-1.21 1.47 5.43 5.43.0 01-1.85.93A8.25 8.25.0 0142.05 15.62z"/><path class="cls-2" d="M45.19 23.81C39.72 27.85 31.78 30 25 30A36.64 36.64.0 01.22 20.57c-.51-.46-.06-1.09.56-.74A49.78 49.78.0 0025.53 26.4 49.23 49.23.0 0044.4 22.53C45.32 22.14 46.1 23.14 45.19 23.81z"/><path class="cls-2" d="M47.47 21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74 3.13-2.2 8.27-1.57 8.86-.83s-.16 5.89-3.09 8.35c-.45.38-.88.18-.68-.32C46.69 25.8 48.17 22.11 47.47 21.21z"/></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=../../../js/lunr.min.js?1765465502></script><script type=text/javascript src=../../../js/auto-complete.js?1765465502></script><script type=text/javascript>var baseurl="https://nguyenmaivy.github.io/nguyenmaivy//vi"</script><script type=text/javascript src=../../../js/search.js?1765465502></script></div><div class=highlightable><ul class=topics><li data-nav-id=/vi/2-proposal/ title="Bản đề xuất" class=dd-item><a href=../../../vi/2-proposal/><b>2. </b>Bản đề xuất
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/ title="Nhật ký công việc" class=dd-item><a href=../../../vi/1-worklog/><b>1. </b>Nhật ký công việc
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/1-worklog/1.1-week1/ title="Worklog Tuần 1" class=dd-item><a href=../../../vi/1-worklog/1.1-week1/><b>1.1. </b>Worklog Tuần 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.10-week10/ title="Worklog Tuần 10" class=dd-item><a href=../../../vi/1-worklog/1.10-week10/><b>1.10. </b>Worklog Tuần 10
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.11-week11/ title="Worklog Tuần 11" class=dd-item><a href=../../../vi/1-worklog/1.11-week11/><b>1.11. </b>Worklog Tuần 11
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.2-week2/ title="Worklog Tuần 2" class=dd-item><a href=../../../vi/1-worklog/1.2-week2/><b>1.2. </b>Worklog Tuần 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.3-week3/ title="Worklog Tuần 3" class=dd-item><a href=../../../vi/1-worklog/1.3-week3/><b>1.3. </b>Worklog Tuần 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.4-week4/ title="Worklog Tuần 4" class=dd-item><a href=../../../vi/1-worklog/1.4-week4/><b>1.4. </b>Worklog Tuần 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.5-week5/ title="Worklog Tuần 5" class=dd-item><a href=../../../vi/1-worklog/1.5-week5/><b>1.5. </b>Worklog Tuần 5
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.6-week6/ title="Worklog Tuần 6" class=dd-item><a href=../../../vi/1-worklog/1.6-week6/><b>1.6. </b>Worklog Tuần 6
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.7-week7/ title="Worklog Tuần 7" class=dd-item><a href=../../../vi/1-worklog/1.7-week7/><b>1.7. </b>Worklog Tuần 7
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.8-week8/ title="Worklog Tuần 8" class=dd-item><a href=../../../vi/1-worklog/1.8-week8/><b>1.8. </b>Worklog Tuần 8
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.9-week9/ title="Worklog Tuần 9" class=dd-item><a href=../../../vi/1-worklog/1.9-week9/><b>1.9. </b>Worklog Tuần 9
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/3-blogstranslated/ title="Các bài blogs đã dịch" class="dd-item
parent"><a href=../../../vi/3-blogstranslated/><b>3. </b>Các bài blogs đã dịch
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/3-blogstranslated/3.1-blog1/ title="Blog 1" class=dd-item><a href=../../../vi/3-blogstranslated/3.1-blog1/><b>3.1. </b>Blog 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.2-blog2/ title="Blog 2" class=dd-item><a href=../../../vi/3-blogstranslated/3.2-blog2/><b>3.2. </b>Blog 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.3-blog3/ title="Blog 3" class=dd-item><a href=../../../vi/3-blogstranslated/3.3-blog3/><b>3.3. </b>Blog 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.4-blog4/ title="Blog 4" class=dd-item><a href=../../../vi/3-blogstranslated/3.4-blog4/><b>3.4. </b>Blog 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.5-blog5/ title="Blog 5" class=dd-item><a href=../../../vi/3-blogstranslated/3.5-blog5/><b>3.6. </b>Blog 5
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.6-blog6/ title="Blog 5" class=dd-item><a href=../../../vi/3-blogstranslated/3.6-blog6/><b>3.6. </b>Blog 5
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.7-blog7/ title="Blog 7" class=dd-item><a href=../../../vi/3-blogstranslated/3.7-blog7/><b>3.7. </b>Blog 7
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.8-blog8/ title="Blog 8" class=dd-item><a href=../../../vi/3-blogstranslated/3.8-blog8/><b>3.8. </b>Blog 8
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.9-blog9/ title="Blog 9" class="dd-item
active"><a href=../../../vi/3-blogstranslated/3.9-blog9/><b>3.9. </b>Blog 9
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/4-eventparticipated/ title="Các events đã tham gia" class=dd-item><a href=../../../vi/4-eventparticipated/><b>4. </b>Các events đã tham gia
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/ title=Workshop class=dd-item><a href=../../../vi/5-workshop/><b>5. </b>Workshop
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.1-workshop-overview/ title="Giới thiệu" class=dd-item><a href=../../../vi/5-workshop/5.1-workshop-overview/><b>5.1. </b>Giới thiệu
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.2-prerequiste/ title="Các bước chuẩn bị" class=dd-item><a href=../../../vi/5-workshop/5.2-prerequiste/><b>5.2. </b>Các bước chuẩn bị
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.3-s3-vpc/ title="Truy cập S3 từ VPC" class=dd-item><a href=../../../vi/5-workshop/5.3-s3-vpc/><b>5.3. </b>Truy cập S3 từ VPC
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.3-s3-vpc/5.3.1-create-gwe/ title="Tạo một Gateway Endpoint" class=dd-item><a href=../../../vi/5-workshop/5.3-s3-vpc/5.3.1-create-gwe/><b>5.3.1 </b>Tạo một Gateway Endpoint
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.3-s3-vpc/5.3.2-test-gwe/ title="Kiểm tra Gateway Endpoint" class=dd-item><a href=../../../vi/5-workshop/5.3-s3-vpc/5.3.2-test-gwe/><b>5.3.2 </b>Kiểm tra Gateway Endpoint
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/5-workshop/5.4-s3-onprem/ title="Truy cập S3 từ môi trường truyền thống" class=dd-item><a href=../../../vi/5-workshop/5.4-s3-onprem/><b>5.4. </b>Truy cập S3 từ môi trường truyền thống
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.4-s3-onprem/5.4.1-prepare/ title="Chuẩn bị tài nguyên" class=dd-item><a href=../../../vi/5-workshop/5.4-s3-onprem/5.4.1-prepare/><b>5.4.1 </b>Chuẩn bị tài nguyên
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.4-s3-onprem/5.4.2-create-interface-enpoint/ title="Tạo một S3 Interface endpoint" class=dd-item><a href=../../../vi/5-workshop/5.4-s3-onprem/5.4.2-create-interface-enpoint/><b>5.4.2 </b>Tạo một S3 Interface endpoint
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.4-s3-onprem/5.4.3-test-endpoint/ title="Kiểm tra Interface Endpoint" class=dd-item><a href=../../../vi/5-workshop/5.4-s3-onprem/5.4.3-test-endpoint/><b>5.4.3 </b>Kiểm tra Interface Endpoint
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.4-s3-onprem/5.4.4-dns-simulation/ title="Mô phỏng On-premises DNS " class=dd-item><a href=../../../vi/5-workshop/5.4-s3-onprem/5.4.4-dns-simulation/><b>5.4.4 </b>Mô phỏng On-premises DNS
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/5-workshop/5.5-policy/ title="VPC Endpoint Policies" class=dd-item><a href=../../../vi/5-workshop/5.5-policy/><b>5.5 </b>VPC Endpoint Policies
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.6-cleanup/ title="Dọn dẹp tài nguyên" class=dd-item><a href=../../../vi/5-workshop/5.6-cleanup/><b>5.6. </b>Dọn dẹp tài nguyên
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/6-self-evaluation/ title="Tự đánh giá" class=dd-item><a href=../../../vi/6-self-evaluation/><b>6. </b>Tự đánh giá
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/7-feedback/ title="Chia sẻ, đóng góp ý kiến" class=dd-item><a href=../../../vi/7-feedback/><b>7. </b>Chia sẻ, đóng góp ý kiến
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://www.facebook.com/groups/awsstudygroupfcj/><i class='fab fa-facebook'></i> AWS Study Group</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding><i class="fas fa-language fa-fw"></i><div class=select-style><select id=select-language onchange="location=this.value"><option id=en value=https://nguyenmaivy.github.io/nguyenmaivy/3-blogstranslated/3.9-blog9/>English</option><option id=vi value=https://nguyenmaivy.github.io/nguyenmaivy/vi/3-blogstranslated/3.9-blog9/ selected>Tiếng Việt</option></select><svg id="Capa_1" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg></div></a></li><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></section><section id=footer><left><b>Workshop</b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title=Migrate alt="web counter" border=0></a><br><b><a href=https://cloudjourney.awsstudygroup.com/>Cloud Journey</a></b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" alt="web counter" border=0>
</left><left><br><br><b>Last Updated</b><br><i><span id=lastUpdated style=color:orange></span>
</i><script>const today=new Date,formattedDate=today.toLocaleDateString("en-GB");document.getElementById("lastUpdated").textContent=formattedDate</script></left><left><br><br><b>Team</b><br><i><a href=https://www.facebook.com/groups/660548818043427 style=color:orange>First Cloud Journey</a><br></i></left><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=../../../vi/>Báo cáo thực tập</a> > <a href=../../../vi/3-blogstranslated/>Các bài blogs đã dịch</a> > Blog 9</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#bắt-đầu-với-powertools-for-aws-lambda-java-v2>Bắt đầu với Powertools for AWS Lambda (Java) v2</a></li><li><a href=#logging>Logging</a></li><li><a href=#metrics>Metrics</a></li><li><a href=#tracing>Tracing</a></li><li><a href=#giảm-thời-gian-lambda-cold-start>Giảm thời gian Lambda Cold Start</a></li><li><a href=#lambda-msk-event-source-mapping-integration>Lambda MSK Event Source Mapping Integration</a></li><li><a href=#kết-luận>Kết luận</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Blog 9</h1><h1 id=giới-thiệu-phiên-bản-v2-của-powertool-for-aws-lambda-java>Giới thiệu phiên bản v2 của Powertool for AWS Lambda (Java)</h1><p>Các ứng dụng hiện đại ngày nay ngày càng dựa vào các công nghệ Serverless như Amazon Web Services (AWS) <a href=https://aws.amazon.com/lambda/>Lambda</a> để đạt được khả năng scalability, cost efficiency, và agility. <a href=https://docs.aws.amazon.com/wellarchitected/latest/serverless-applications-lens/>Serverless Applications Lens trong AWS Well-Architected Framework</a> tập trung vào cách thiết kế, triển khai, và kiến trúc hóa các ứng dụng Serverless của bạn để vượt qua những thách thức này.</p><p><a href=https://github.com/aws-powertools>Powertools for AWS</a> Lambda là một developer toolkit giúp bạn triển khai Serverless best practices và chuyển đổi trực tiếp các khuyến nghị trong AWS Well-Architected thành các tiện ích có thể hành động, thân thiện với developer. Sau khi cộng đồng thành công trong việc áp dụng Powertools cho AWS bằng Python, Java, TypeScript, và .NET, bài viết này công bố phiên bản chính thức của Powertools for AWS Lambda (Java) v2, đi kèm các cải tiến lớn về hiệu năng, nâng cấp các core utilities, và một Kafka utility hoàn toàn mới.</p><p>Powertools for AWS (Java) v2 bao gồm 3 core utilities được cập nhật:</p><ul><li><strong>Logging</strong>: Mô-đun logging được thiết kế lại theo phong cách Java idiomatic, cung cấp structured logging giúp dễ dàng tổng hợp và phân tích log.</li><li><strong>Metrics</strong>: Trải nghiệm metrics được cải thiện, cho phép thu thập custom metrics bằng <a href=https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch_Embedded_Metric_Format_Specification.html>CloudWatch Embedded Metric Format (EMF)</a>.</li><li><strong>Tracing</strong>: Cách tiếp cận dựa trên annotation để thu thập distributed tracing data với <a href=https://aws.amazon.com/xray/>AWS X-Ray</a>, giúp trực quan hóa và phân tích luồng request.</li></ul><p>Các tính năng mới trong v2:</p><ul><li><strong>GraalVM native image support</strong>: Hỗ trợ native image cho GraalVM trên tất cả các core utilities, giúp giảm thời gian Lambda cold start lên đến 75.61% (p95).</li><li><strong>Kafka utility</strong>: Tích hợp với <a href=https://aws.amazon.com/msk/>Amazon Managed Streaming for Apache Kafka (Amazon MSK)</a> và self-managed Kafka event sources trên Lambda, cho phép deserialize trực tiếp thành Kafka native types như ConsumerRecords.</li></ul><p>Xem thêm chi tiết về hướng dẫn nâng cấp trong tài liệu <a href=https://docs.powertools.aws.dev/lambda/java/latest/upgrade/>upgrade guide</a>.</p><hr><h2 id=bắt-đầu-với-powertools-for-aws-lambda-java-v2>Bắt đầu với Powertools for AWS Lambda (Java) v2</h2><p>Powertools for AWS Lambda (Java) v2 có sẵn dưới dạng Java package trên Maven Central và tích hợp với các công cụ build phổ biến như Maven và Gradle. Bài viết này tập trung vào ví dụ triển khai bằng Maven để bạn có thể bắt đầu nhanh chóng. Các ví dụ về Gradle được cung cấp trong <a href=https://docs.powertools.aws.dev/lambda/java/>tài liệu</a> và <a href=https://github.com/aws-powertools/powertools-lambda-java/tree/main/examples>repository ví dụ</a>.
Toolkit này tương thích với Java 11 trở lên, đảm bảo bạn có thể sử dụng các tính năng Java hiện đại khi xây dựng ứng dụng Serverless. Hướng dẫn cài đặt từng utility được trình bày trong các phần sau, và cấu hình đầy đủ có sẵn trong <a href=https://docs.powertools.aws.dev/lambda/java/>tài liệu Powertools</a>.</p><hr><h2 id=logging>Logging</h2><p>Utility Logging giúp triển khai structured logging khi chạy trên Lambda mà vẫn sử dụng được các thư viện logging quen thuộc của Java như slf4j, log4j, và logback. Phiên bản v2 của Logging cho phép bạn:</p><ul><li>Xuất structured JSON logs có thêm thông tin từ Lambda context.</li><li>Chọn backend logging yêu thích: log4j2 hoặc logback.</li><li>Thêm structured arguments vào log, được serialize thành nested JSON objects.</li><li>Thêm global log keys bằng <a href=https://www.slf4j.org/apidocs/org/slf4j/MDC.html>Mapped Diagnostic Context (MDC)</a> của slf4j.</li></ul><p>Ví dụ thêm dependency vào Maven project (log4j2 backend):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>&lt;!-- In the dependencies section --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;groupId&gt;software.amazon.lambda&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;artifactId&gt;powertools-logging-log4j&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;!-- Alternatively, if you wish to use the logback backend</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;artifactId&gt;powertools-logging-logback&lt;/artifactId&gt; </span>
</span></span><span style=display:flex><span>    --&gt;<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;version&gt;2.1.1&lt;/version&gt;</span>    
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;!-- In the build plugins section --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;plugin&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;groupId&gt;dev.aspectj&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>&lt;aspectLibraries&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#ae81ff>&lt;aspectLibrary&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>&lt;groupId&gt;software.amazon.lambda&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>&lt;artifactId&gt;powertools-logging&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>&lt;version&gt;2.1.1&lt;/version&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#ae81ff>&lt;/aspectLibrary&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>&lt;/aspectLibraries&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;/configuration&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;/plugin&gt;</span>
</span></span></code></pre></div><p>Tạo một ứng dụng JsonTemplateLayout tùy chỉnh trong tệp log4j2.xml của bạn:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;Configuration&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;Appenders&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>&lt;Console name=&#34;JsonAppender&#34; target=&#34;SYSTEM_OUT&#34;&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#ae81ff>&lt;JsonTemplateLayout eventTemplateUri=&#34;classpath:LambdaJsonLayout.json&#34; /&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>&lt;/Console&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;/Appenders&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;Loggers&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>&lt;Logger name=&#34;JsonLogger&#34; level=&#34;INFO&#34; additivity=&#34;false&#34;&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#ae81ff>&lt;AppenderRef ref=&#34;JsonAppender&#34;/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>&lt;/Logger&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>&lt;Root level=&#34;info&#34;&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#ae81ff>&lt;AppenderRef ref=&#34;JsonAppender&#34;/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>&lt;/Root&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;/Loggers&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;/Configuration&gt;</span>
</span></span></code></pre></div><p>Để thêm tính năng ghi nhật ký có cấu trúc vào các hàm của bạn, hãy áp dụng chú thích @Logging cho trình xử lý Lambda của bạn và sử dụng <a href=https://www.slf4j.org/>slf4j Java API</a> quen thuộc khi viết câu lệnh nhật ký. Điều này cho phép bạn áp dụng tiện ích ghi nhật ký mà không cần tái cấu trúc mã chính. Powertools xử lý việc định tuyến tới chương trình phụ trợ ghi nhật ký chính xác cho bạn. Ví dụ sau đây cho thấy cách thêm khóa nhật ký chung bằng MDC và thêm đối số mục nhập có cấu trúc vào thông điệp nhật ký của bạn:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>public class App implements RequestHandler&lt;SQSEvent, String&gt; {</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>private static final Logger log = LoggerFactory.getLogger(App.class);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @<span style=color:#ae81ff>Logging</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>public String handleRequest(final SQSEvent input, final Context context) {</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// Add a global log key using Mapped Diagnostic Context MDC</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>MDC.put(&#34;myCustomKey&#34;, &#34;willBeLoggedForAllLogStatements&#34;);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// Log a message with a structured argument (any JSON serializable Object)</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>log.info(&#34;My message&#34;, entry(&#34;anotherCustomKey&#34;, Map.of(&#34;nested&#34;, &#34;object&#34;)));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// ... return response</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Lambda gửi đầu ra có định dạng JSON sau tới <a href=https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html>Amazon CloudWatch Logs</a> (lưu ý cách Java Map được tự động tuần tự hóa thành đối tượng JSON):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;level&#34;: </span><span style=color:#e6db74>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;message&#34;: </span><span style=color:#e6db74>&#34;My message&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;cold_start&#34;: </span><span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;function_arn&#34;: </span><span style=color:#e6db74>&#34;arn:aws:lambda:us-east-1:012345678912:function:AppFunction&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;function_memory_size&#34;: </span><span style=color:#ae81ff>512</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;function_name&#34;: </span><span style=color:#e6db74>&#34;AppFunction&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;function_request_id&#34;: </span><span style=color:#e6db74>&#34;0150a2a4-c5aa-4277-9345-17bad039f6c0&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;function_version&#34;: </span><span style=color:#e6db74>&#34;$LATEST&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;sampling_rate&#34;: </span><span style=color:#ae81ff>0.1</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;service&#34;: </span><span style=color:#e6db74>&#34;powertools-java-sample&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;timestamp&#34;: </span><span style=color:#e6db74>&#34;2025-05-20T08:35:28.565Z&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;myCustomKey&#34;: </span><span style=color:#e6db74>&#34;willBeLoggedForAllLogStatements&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;anotherCustomKey&#34;: </span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;nested&#34;: </span><span style=color:#e6db74>&#34;object&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><h2 id=metrics>Metrics</h2><p>CloudWatch cung cấp các service metrics tích hợp sẵn giúp theo dõi throughput của ứng dụng, tỷ lệ lỗi, và mức sử dụng tài nguyên. Tuy nhiên, người dùng cũng cần thu thập các custom metrics đặc thù cho workload của họ — những metric có liên quan trực tiếp đến bài toán kinh doanh, theo đúng best practices trong AWS Well-Architected Framework.</p><p>Powertools for AWS (Java) cho phép bạn tạo custom metrics một cách bất đồng bộ (asynchronously) bằng cách xuất dữ liệu metric theo định dạng CloudWatch EMF (Embedded Metric Format) trực tiếp ra standard output — một cách tiếp cận không yêu cầu thêm bất kỳ cấu hình nào khác. Dịch vụ Lambda sẽ tự động gửi các metric có định dạng EMF đó đến CloudWatch thay bạn.</p><p>Metrics utility cho phép bạn:</p><ul><li>Tạo custom metrics bất đồng bộ bằng CloudWatch EMF.</li><li>Giảm độ trễ (latency) nhờ tránh việc publish metric đồng bộ.</li><li>Tự động theo dõi cold starts trong một custom CloudWatch metric.</li><li>Loại bỏ việc phải xác thực thủ công output của bạn so với EMF specification.</li><li>Giữ code gọn gàng, không cần flush thủ công ra standard output.</li></ul><p>Để thêm Metrics utility vào project của bạn, hãy thêm dependency Maven sau đây:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;groupId&gt;software.amazon.lambda&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;artifactId&gt;powertools-metrics&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;version&gt;2.1.1&lt;/version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;!-- In the build plugins section --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;plugin&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;groupId&gt;dev.aspectj&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>&lt;aspectLibraries&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#ae81ff>&lt;aspectLibrary&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>&lt;groupId&gt;software.amazon.lambda&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>&lt;artifactId&gt;powertools-metrics&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>&lt;version&gt;2.1.1&lt;/version&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#ae81ff>&lt;/aspectLibrary&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>&lt;/aspectLibraries&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;/configuration&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;/plugin&gt;</span>
</span></span></code></pre></div><p>Để thêm số liệu tùy chỉnh vào hàm Lambda, hãy đặt chú thích @FlushMetrics trên trình xử lý Lambda của bạn. Thư viện đảm nhiệm việc xác thực và chuyển số liệu của bạn sang đầu ra tiêu chuẩn trước khi hàm Lambda kết thúc. Ví dụ sau đây cho thấy cách bạn có thể tự động nắm bắt số liệu khởi động nguội và đưa ra số liệu tùy chỉnh của riêng mình:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>public class App implements RequestHandler&lt;SQSEvent, String&gt; {</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>private static final Logger log = LoggerFactory.getLogger(App.class);</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>private static final Metrics metrics = MetricsFactory.getMetricsInstance();</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>// This configures a default namespace and service dimension for all metrics</span>
</span></span><span style=display:flex><span>    @<span style=color:#ae81ff>FlushMetrics(namespace = &#34;ServerlessAirline&#34;, service = &#34;payment&#34;, captureColdStart = true)</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>public String handleRequest(final SQSEvent input, final Context context) {</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// The Metrics instance is a singleton</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>metrics.addMetric(&#34;CustomMetric1&#34;, 1, MetricUnit.COUNT);</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// Publish metrics with non-default configuration options</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>DimensionSet dimensionSet = new DimensionSet();</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>dimensionSet.addDimension(&#34;Service&#34;, &#34;AnotherService&#34;);</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>metrics.flushSingleMetric(&#34;CustomMetric2&#34;, 1, MetricUnit.COUNT, &#34;AnotherNamespace&#34;, dimensionSet);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// ... return response</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><img src=../../../images/3-Blogstranslated/Blog9/cloudwatch-graph-view.png></p><blockquote><p><em>Hình 1. Chế độ xem biểu đồ số liệu AWS CloudWatch.</em></p></blockquote><hr><h2 id=tracing>Tracing</h2><p>Tiện ích Tracing cung cấp khả năng tích hợp dựa trên chú thích với X-Ray để theo dõi phân tán với cấu hình tối thiểu. Truy tìm cho phép bạn:</p><ul><li>Theo dõi các lời gọi hàm và tương tác với AWS services trong X-Ray console.</li><li>Tự động ghi nhận lỗi, phản hồi, và cold start.</li><li>Thêm custom metadata để hỗ trợ debug.</li><li>Bật/tắt tracing qua environment variables mà không cần chỉnh code.</li></ul><p>Để thêm tiện ích Tracing vào dự án của bạn, hãy thêm phần phụ thuộc Maven sau:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>&lt;!-- In the dependencies section --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;groupId&gt;software.amazon.lambda&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;artifactId&gt;powertools-tracing&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;version&gt;2.1.1&lt;/version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;!-- In the build plugins section --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;plugin&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;groupId&gt;dev.aspectj&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>&lt;aspectLibraries&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#ae81ff>&lt;aspectLibrary&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>&lt;groupId&gt;software.amazon.lambda&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>&lt;artifactId&gt;powertools-tracing&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#ae81ff>&lt;version&gt;2.1.1&lt;/version&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#ae81ff>&lt;/aspectLibrary&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>&lt;/aspectLibraries&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;/configuration&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;/plugin&gt;</span>
</span></span></code></pre></div><p>Để bật tính năng theo dõi trong hàm Lambda, hãy chú thích trình xử lý Lambda và các phương thức tùy chỉnh mà bạn muốn theo dõi bằng chú thích @Tracing. Mỗi chú thích ánh xạ tới một phân đoạn phụ của trình xử lý Lambda chính của bạn trong X-Ray và hiển thị trong bảng điều khiển.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>public class App implements RequestHandler&lt;APIGatewayProxyRequestEvent, APIGatewayProxyResponseEvent&gt; {</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>private static final Logger log = LoggerFactory.getLogger(App.class);</span>
</span></span><span style=display:flex><span>    @<span style=color:#ae81ff>Tracing</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>public APIGatewayProxyResponseEvent handleRequest(final APIGatewayProxyRequestEvent input, final Context context) {</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// ... business logic</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// Get calling IP with tracing</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>String location = getCallingIp(&#34;https://checkip.amazonaws.com&#34;)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// ... return response</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    @<span style=color:#ae81ff>Tracing(segmentName = &#34;Location service&#34;)</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>private String getCallingIp(String address) {</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// Implementation to get IP address</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>log.info(&#34;Retrieving caller IP address&#34;);</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// Add custom metadata to current sub-segment</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>URL url = new URL(address);</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>putMetadata(&#34;getCallingIp&#34;, address);</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// ...</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>return &#34;127.0.0.1&#34;;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Bảng điều khiển X-Ray hiển thị bản đồ dịch vụ được tạo khi lưu lượng truy cập bắt đầu chảy qua ứng dụng của bạn. Việc áp dụng chú thích Truy tìm cho phương thức xử lý hàm Lambda của bạn hoặc bất kỳ phương thức nào khác trong chuỗi thực thi sẽ cung cấp cho bạn khả năng hiển thị toàn diện về các mẫu lưu lượng truy cập trong toàn bộ ứng dụng của bạn. Hình sau đây cho thấy siêu dữ liệu tùy chỉnh được thêm vào trong ví dụ được liên kết với phân đoạn phụ tùy chỉnh như thế nào.</p><p><img src=../../../images/3-Blogstranslated/Blog9/xray-trace-waterfall.jpeg></p><blockquote><p><em>Hình 2. Chế độ xem dấu vết thác nước AWS X-Ray.</em></p></blockquote><hr><h2 id=giảm-thời-gian-lambda-cold-start>Giảm thời gian Lambda Cold Start</h2><p>Một tính năng chính trong Powertools dành cho AWS Lambda (Java) v2 là hỗ trợ hình ảnh gốc <a href=https://www.graalvm.org/>GraalVM</a> cho tất cả các tiện ích cốt lõi. Việc biên dịch các hàm Lambda của bạn thành các tệp thực thi gốc cho phép bạn giảm đáng kể thời gian khởi động nguội và mức sử dụng bộ nhớ. Sử dụng Powertools v2 với GraalVM cho phép bạn giảm khả năng khởi động nguội lên tới <strong>75,61% (p95)</strong> so với sử dụng thời gian chạy Java được quản lý. Điểm chuẩn sau đây so sánh thời gian khởi động nguội của một ứng dụng sử dụng tất cả các tiện ích cốt lõi (ghi nhật ký, số liệu, theo dõi) trên thời gian chạy java21 được quản lý so với thời gian chạy Lambda do Lambda provided.al2023 chạy hình ảnh gốc được biên dịch GraalVM (đi đến <a href=https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html>Lambda runtimes</a> để được hỗ trợ):</p><table><thead><tr><th style=text-align:left>Environment</th><th style=text-align:left>p95 (ms)</th><th style=text-align:left>Min (ms)</th><th style=text-align:left>Avg (ms)</th><th style=text-align:left>Max (ms)</th><th style=text-align:left>Max Memory (MB)</th><th style=text-align:left>N</th></tr></thead><tbody><tr><td style=text-align:left>Powertools for AWS (Java) v2: JVM</td><td style=text-align:left>1682.92</td><td style=text-align:left>1224.55</td><td style=text-align:left>1224.55</td><td style=text-align:left>2229.81</td><td style=text-align:left>205.04</td><td style=text-align:left>234</td></tr><tr><td style=text-align:left>Powertools for AWS (Java) v2: GraalVM</td><td style=text-align:left>542.86</td><td style=text-align:left>404.92</td><td style=text-align:left>504.77</td><td style=text-align:left>752.85</td><td style=text-align:left>93.46</td><td style=text-align:left>369</td></tr></tbody></table><p>Cải tiến này đặc biệt có giá trị đối với các ứng dụng và chức năng nhạy cảm với độ trễ thường xuyên mở rộng quy mô. Kiểm tra một <a href=https://github.com/aws-powertools/powertools-lambda-java/tree/main/examples/powertools-examples-core-utilities/sam-graalvm>ví dụ hoạt động đầy đủ trên GitHub</a>.</p><hr><h2 id=lambda-msk-event-source-mapping-integration>Lambda MSK Event Source Mapping Integration</h2><p>Kafka utility mới được giới thiệu trong Powertools for AWS Lambda (Java) v2 giúp đơn giản hóa việc làm việc với <a href=https://docs.aws.amazon.com/lambda/latest/dg/with-msk.html>Lambda MSK Event Source Mapping (ESM)</a> và self-managed Kafka event sources. Nó mang lại một trải nghiệm quen thuộc cho các developer đã từng làm việc với Apache Kafka bằng cách cho phép chuyển đổi trực tiếp các Lambda events sang các kiểu dữ liệu native của Kafka. Các tính năng chính bao gồm:</p><ul><li>Deserialization trực tiếp thành các đối tượng Kafka ConsumerRecords&lt;K, V> đồng thời vẫn sử dụng Lambda-native RequestHandler interface.</li><li>Hỗ trợ deserialization các bản ghi được mã hóa bằng JSON, <a href=https://avro.apache.org/>Avro</a>, và <a href=https://protobuf.dev/>Protobuf</a> cho cả key và value fields, có hoặc không sử dụng Schema Registry khi tạo message.</li></ul><p>Để thêm Kafka utility vào project của bạn, hãy bao gồm thư viện powertools-kafka như một Maven dependency trong file pom.xml:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>&lt;!-- In the dependencies section --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;groupId&gt;software.amazon.lambda&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;artifactId&gt;powertools-kafka&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;version&gt;2.1.1&lt;/version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;!-- Kafka clients dependency - compatibility works for &gt;= 3.0.0 --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>&lt;version&gt;4.0.0&lt;/version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>&lt;/dependency&gt;</span>
</span></span></code></pre></div><p>Hãy sử dụng annotation @Deserialization trên Lambda handler của bạn để deserialize các message thành các native Kafka ConsumerRecords. Đảm bảo rằng bạn chỉ định loại deserializer phù hợp. Ví dụ sau đây minh họa cách deserialize các bản ghi được mã hóa bằng Avro với String keys. Giống như trong Lambda handler thông thường, bạn chỉ cần khai báo kiểu dữ liệu đầu vào cho function của mình trong RequestHandler generic parameters, và utility sẽ tự động phát hiện các kiểu deserialization. Lớp AvroProduct trong ví dụ bên dưới là một Java class được auto-generated bằng thư viện Java org.apache.avro.avro.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>public class App implements RequestHandler&lt;ConsumerRecords&lt;String, AvroProduct&gt;, Void&gt; {</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>private static final Logger log = LoggerFactory.getLogger(App.class);</span>
</span></span><span style=display:flex><span>    @<span style=color:#ae81ff>Deserialization(type = DeserializationType.KAFKA_AVRO)</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>public Void handleRequest(ConsumerRecords&lt;String, AvroProduct&gt; consumerRecords, Context context) {</span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>log.info(&#34;Deserialized {} records.&#34;, consumerRecords.records().size()); </span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>// ... Business logic </span>
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>return null;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><h2 id=kết-luận>Kết luận</h2><p>Powertools for AWS Lambda (Java) v2 đại diện cho bước tiến mới trong bộ công cụ hỗ trợ xây dựng các ứng dụng Serverless có tính ổn định, khả năng quan sát cao và hiệu suất vượt trội. Trong suốt bài viết này, chúng ta đã cùng tìm hiểu về các core observability utilities được cải tiến cùng những tính năng mới, hiệu năng vượt trội nhờ GraalVM native image support, và Kafka utility hoàn toàn mới giúp bạn làm việc với các Kafka pattern quen thuộc trong Lambda.</p><p>Powertools còn cung cấp nhiều utility khác để xử lý các Serverless design pattern phổ biến, mỗi utility đều được thiết kế dựa trên nguyên tắc rõ ràng và tối giản overhead. Để tìm hiểu thêm:</p><ol><li>Truy cập <a href=https://docs.powertools.aws.dev/lambda/java/>tài liệu</a> chính thức để xem các hướng dẫn chi tiết và ví dụ minh họa.</li><li>Thử các <a href=https://github.com/aws-powertools/powertools-lambda-java/tree/main/examples>sample applications</a> được cung cấp.</li><li>Tham gia <a href=https://github.com/aws-powertools/powertools-lambda-java>cộng đồng</a> trên GitHub để chia sẻ trải nghiệm và nhận hỗ trợ.</li></ol><p>Ứng dụng Serverless tiếp theo của bạn đang chờ đón — cùng khám phá với Powertools for AWS Lambda (Java) v2. Chúng tôi rất mong nhận được phản hồi từ bạn!</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=../../../vi/3-blogstranslated/3.8-blog8/ title="Blog 8"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=../../../vi/4-eventparticipated/ title="Các events đã tham gia" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=../../../js/clipboard.min.js?1765465502></script><script src=../../../js/perfect-scrollbar.min.js?1765465502></script><script src=../../../js/perfect-scrollbar.jquery.min.js?1765465502></script><script src=../../../js/jquery.sticky.js?1765465502></script><script src=../../../js/featherlight.min.js?1765465502></script><script src=../../../js/highlight.pack.js?1765465502></script><script>hljs.initHighlightingOnLoad()</script><script src=../../../js/modernizr.custom-3.6.0.js?1765465502></script><script src=../../../js/learn.js?1765465502></script><script src=../../../js/hugo-learn.js?1765465502></script><link href=../../../mermaid/mermaid.css?1765465502 rel=stylesheet><script src=../../../mermaid/mermaid.js?1765465502></script><script>mermaid.initialize({startOnLoad:!0})</script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,(e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date),(i=t.createElement(n),a=t.getElementsByTagName(n)[0]),i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-158079754-2","auto"),ga("send","pageview")</script></body></html>